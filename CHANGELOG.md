# Changelog

All notable changes to Narvana are documented here.

## [0.0.6] - 2026-01-24

- fix: use glibc-based image for tailwindcss binary compatibility (47f020d)

## [0.0.1] - 2026-01-08

- ci(changelog): Update banner generation to support multiple output formats (17103f7)
- feat(scripts): Replace emoji headers with Font Awesome SVG icons (112a441)
- ci(changelog): Remove release_id dependency and query releases by tag (0719df6)
- chore(scripts): Refactor install.sh with improved error handling and modularity (00f59a3)
- ci(release): Migrate to softprops/action-gh-release for simplified workflow (6a4b50e)
- feat(scripts): Add banner size presets (491004d)
- ci(changelog): Add override file detection and enhanced release entry generation (1c5df0b)
- feat(scripts): Add release notes generation and banner relative path utilities (21eeae3)
- ci: Add gofmt formatting step to CI workflow (5fc79c8)
- chore(config): Move gofmt to disabled linters with explanation (7cfd5ac)
- style(web,builder): Fix formatting and whitespace issues (aa3eff6)
- chore(config): Refactor golangci-lint configuration for stricter linting (11bb547)
- ci: Add templ template generation to CI workflows (935486c)
- ci: Update default branch reference from main to master (739e6c6)
- refactor(scripts): Update command files to use package-scoped functions (23561b1)
- docs: Update README with Apache 2.0 license and Podman badge (67eeaf2)
- chore: Add Apache 2.0 license file (c1c6cdb)
- refactor(scripts): Reorganize scripts as reusable package (f060545)
- docs: Add comprehensive contributing guidelines (62372b8)
- test(e2e): Add comprehensive end-to-end testing framework (f9a2cf7)
- test(integration): Add comprehensive deployment flow integration tests (34e2656)
- chore(config): Update gitignore and golangci-lint configuration (b755a96)
- chore(act): Add act configuration and secrets template for local testing (22fa9da)
- chore(nix): Add act tool for local GitHub Actions testing (035f3f5)
- ci: Add automated changelog update workflow (e07fcf3)
- chore(scripts): Add changelog command-line tool for automated updates (5136f6c)
- chore(scripts): Add banner generation command-line tool (75f7527)
- chore(scripts): Add release entry command-line tool for changelog generation (07568a0)
- ci: Add automated release workflow for version tagging (8654a06)
- ci: Add comprehensive GitHub Actions CI/CD workflow (178402b)
- chore(lint): Add golangci-lint configuration with comprehensive linter rules (ce7d4f2)
- chore(scripts): Add banner generation utilities with property-based tests (e711cb8)
- chore(scripts): Add version extraction utilities with property-based tests (2d5cb7e)
- chore(scripts): Add release entry generation with property-based tests (5000c98)
- chore(scripts): Add changelog generation utilities and property tests (e46dc3c)
- chore(build): Add OpenAPI validation and documentation targets to Makefile (dd310ae)
- feat(api): Add API documentation endpoints with Swagger UI support (055b1ff)
- feat(api): Add API documentation handler with Swagger UI support (0305ffc)
- test(api): Add property-based tests for OpenAPI schema completeness (da34129)
- chore(scripts): Add OpenAPI specification validation script (2ad4943)
- docs(api): Add comprehensive OpenAPI specification for Control Plane API (06fd042)
- docs(api): Add comprehensive OpenAPI specification for Control Plane API (bb2a295)
- chore(deps): promote direct dependencies and update versions (dedf1a4)
- Add Ping method to statsMockStore for interface consistency (ab7bed3)
- Add Ping method to mockStoreRBAC for interface consistency (f1694b0)
- Add Ping method to mockStore and appDeletionMockStore for interface consistency (7b8bdc6)
- Add Ping method to orgTestStore and mockStore for interface consistency (6632053)
- Refactor main function to enhance graceful shutdown process (205b855)
- Implement graceful shutdown for web server using shutdown coordinator (16a1b45)
- Refactor shutdown handling in worker to use new shutdown coordinator (2611f59)
- Add shutdown components for graceful termination of various services (349d868)
- Add graceful shutdown functionality with comprehensive tests (8c64354)
- Add ShutdownTimeout configuration to enhance graceful shutdown capabilities (24c1b8a)
- Enhance health check endpoint to verify API connectivity (b93f30f)
- Add health check server for worker components (9d43599)
- Add comprehensive health check tests for database connectivity and response time (7158893)
- Add Ping method to MockStore for consistency with Store interface (441bb35)
- Integrate health check functionality into API server (292418b)
- Add Ping method to Store interface for database connectivity verification (844905d)
- Add Ping method for database connectivity checks (19ccd5c)
- Add health check functionality for worker components (a1fdd82)
- Add health check package for API components (1bfd388)
- Add CheckHealth method to Client for API server health checks (872445a)
- Add health check functionality for the web server (520b037)
- Enhance recovery middleware to log structured error details on panic (0e53338)
- Refactor API error handling to use structured responses (5b30846)
- Add structured error handling and validation tests (2220cf4)
- Remove unused authentication and authorization error handling functions from main.go (46cc59d)
- Update init-attic.sh to include a blank line (ad37844)
- Add unit tests for UpsertEnvVars function and implement unescapeValue utility (b1781fe)
- Add Secrets API Delete Proxy Endpoint (58dcbc2)
- Enhance Secrets Management UI with Dynamic Form and Auto-Save Functionality (9a0d4b1)
- Initialize SOPS service for secret decryption and integrate EnvMerger in main application flow. This allows for the decryption of secrets if configured and merges app-level secrets with service-level environment variables before deployment, enhancing environment variable management capabilities. (cf97fe3)
- Add environment variable API proxy endpoints for listing and updating (64b9ccb)
- Add EnvMerger integration in Scheduler for environment variable management (b17b139)
- Add environment variable parsing and serialization utilities (c4ad157)
- Add environment variable management UI and logic (2b446fb)
- Add EnvMerger for environment variable management (5873699)
- Add git reference input field and enhance entry point population logic (3684e38)
- Refactor whitespace in config.go to enhance code readability and maintain consistency across the codebase. This includes aligning field declarations for improved clarity. (13bf43d)
- Add environment variable validation and testing functionality (1a1c8f5)
- Clean up whitespace in service.go to enhance code readability and maintain consistency across the codebase. This includes aligning field declarations and removing unnecessary blank lines. (fd27540)
- Remove unnecessary blank line in secrets_property_test.go to enhance code readability and maintain consistency across the codebase. (dedb9fc)
- Implement environment variable management features in service and app stores, including CRUD operations for environment variables. Add comprehensive property-based tests to validate the functionality of environment variable creation, retrieval, updating, and deletion. Refactor resource handling in deployments to utilize ResourceSpec instead of ResourceTier for improved flexibility. Clean up whitespace for enhanced readability and consistency across the codebase. (733169e)
- Remove unnecessary blank line in store.go to enhance code readability and maintain consistency across the codebase. (07d7008)
- Clean up whitespace in sops.go and sops_property_test.go to enhance code readability and maintain consistency across the codebase. This includes removing unnecessary blank lines and aligning formatting. (4f0cbdc)
- Refactor deployment resource handling by replacing ResourceTier with ResourceSpec for improved flexibility in resource specification. Update related fields in Deployment and associated tests to reflect this change. Clean up whitespace for better readability and consistency across the codebase. (eda1ce6)
- Remove unnecessary blank line in PostgresQueue's Enqueue function to enhance code readability and maintain consistency across the codebase. (216e31c)
- Refactor whitespace in queue_property_test.go to improve code readability and maintain consistency across the codebase. This includes aligning comments and removing unnecessary blank lines. (24b9cd8)
- Refactor resource limits handling by introducing ResourceLimitsFromSpec function for improved flexibility in resource allocation. This change replaces the deprecated ResourceLimitsForTier function and adds a new parseMemoryToMB utility for better memory parsing. Clean up whitespace for enhanced readability and consistency across the codebase. (7bb694e)
- Refactor resource allocation structures by deprecating ResourceTier in favor of ResourceSpec for improved flexibility in resource specification. Update related fields in ServiceConfig, Deployment, and associated tests to reflect this change. Clean up whitespace for better readability and consistency across the codebase. (fae09af)
- Refactor whitespace in GitHub client integration file to improve code readability and maintain consistency across the codebase. This includes removing unnecessary blank lines and aligning formatting. (0afd061)
- Refactor whitespace in Bitbucket, GitHub, and GitLab integration files for improved code readability and consistency across the codebase. This includes aligning formatting and removing unnecessary blank lines. (5eca8fa)
- Add ListEnvVars and UpdateEnvVar endpoints to service handler for enhanced environment variable management (4b66812)
- Refactor whitespace in property test files to enhance code readability and maintain consistency across the codebase. This includes aligning comments and removing unnecessary blank lines in handlers_property_test.go, node_manager_property_test.go, and server_property_test.go. (c126ccd)
- Refactor whitespace in registry.go to improve code readability and maintain consistency across the codebase. This includes removing unnecessary blank lines and aligning formatting in the database template definitions. (47c0680)
- Implement UpdateEnvVar and ListEnvVars functionalities in ServiceHandler, enhancing environment variable management with validation, error handling, and ownership checks. Update DeleteEnvVar to use specific error codes for improved clarity in responses. (9295316)
- Refactor whitespace in service_property_test.go and service.go for improved code readability and consistency across the codebase. (9ee8bae)
- Enhance Go build configuration in go-cgo.nix.tmpl (b3cb386)
- Remove unnecessary blank lines in engine.go and engine_property_test.go to enhance code readability and maintain consistency across the codebase. (7719259)
- Remove unnecessary blank lines in manager.go to improve code readability and maintain consistency across the codebase. (ccc199d)
- Enhance AddEnvVar functionality by adding validation for environment variable keys and values, improving error handling with specific error codes, and introducing a structured response format. This ensures better compliance with requirements and provides clearer feedback to API users. (07c9e7c)
- Remove unnecessary blank lines in manager_property_test.go and manager.go to enhance code readability and maintain consistency across the codebase. (2888c56)
- Remove unnecessary blank lines in calculator_property_test.go and calculator.go to improve code readability and maintain consistency across the codebase. (e1d736e)
- Implement pre-build phase for Go applications with detection caching (aa9184a)
- Refactor error codes in errors.go for improved readability by aligning formatting and removing unnecessary whitespace. (3c208ef)
- Remove unnecessary blank lines in selector_property_test.go and selector.go to improve code readability and maintain consistency across the codebase. (5065856)
- Add git repository cloning utilities (5f3e9f7)
- Enhance CGO package detection and testing (51620cc)
- Add detection caching functionality with comprehensive tests (6e5e58e)
- Remove unnecessary blank lines across multiple files to enhance code readability and maintain consistency throughout the codebase. (7127135)
- Remove unnecessary blank lines in auth_property_test.go, rbac_property_test.go, and service.go to enhance code readability and maintain consistency across the codebase. (297082a)
- Remove unnecessary blank lines in auth and org middleware files to improve code readability and maintain consistency across the codebase. (e1cf011)
- Refactor code formatting and enhance resource management in deployment handling (a137670)
- Add PATCH and environment variable management routes to service API (9102b52)
- Remove unnecessary blank lines in client.go to improve code readability and enhance overall code structure. (52cd654)
- Implement UpdateServicePort functionality and enhance service management routes (e3fca94)
- Refactor resource generation in agent_property_test.go to use ResourceSpec (9e0f119)
- Remove unnecessary blank lines in auth_property_test.go to improve code readability. (fe7ca1a)
- Enhance user registration process by creating a default organization for the first user. This commit adds functionality to automatically create a default organization and assign the first registered user as its owner, improving user onboarding experience. Additionally, it includes minor formatting adjustments for code readability. (3b3536a)
- Remove unnecessary blank lines in apps_property_test.go and apps.go for improved code readability (86a8933)
- Refactor deployment handling to use Resources field for CPU and memory specifications (311e6d7)
- Refactor test file formatting and add UpdateServicePort method (489c674)
- Add NixGC node registration check in CleanupHandler (d7f5def)
- Refactor service resource management to remove deprecated resource_tier field (83feacd)
- Refactor CPDeploymentConfig to use CPResourceSpec for resource allocation (8d63ea4)
- Add CPResourceSpec for resource allocation in control plane (ba6ab70)
- Update agent.proto and agent.pb.go to introduce ResourceSpec for resource allocation (3b08f01)
- Add migration to replace resource_tier with resources JSONB in deployments table (5bbadc0)
- Add detection result fields to builds table in migration 024 (da823d0)
- Update README.md (fc59a63)
- Add Terminal Dialog for Non-Database Services in Service Detail Template (a0fa902)
- Remove unused .gitkeep files from cmd/api and cmd/worker directories (0c8972d)
- Add Cleanup and Confirmation Dialogs in Settings and App Detail Templates (fad0aa4)
- Add Build System Documentation section to app detail template (c593f46)
- Enhance Go template for workspace support and command hooks (2751f08)
- Add property-based tests for Go workspace detection (da12d88)
- Add property-based tests for pre-build and post-build hook execution order (6fafcf4)
- Add IsWorkspace and WorkspaceModule fields to BuildConfig (24aa1d5)
- Add Go workspace detection and parsing functionality (493506c)
- Add workspace support to BuildConfig in client.go (a61abfa)
- Add property-based tests for multi-binary detection (cbfaac0)
- Enhance error handling in detection process by adding specific responses for no entry points found, including guidance for various programming languages (9c8801b)
- Enhance Go entry point detection by introducing a list of standard directories to check for main packages (16a46a6)
- Add new error for entry points detection in repository (7c0465e)
- Add property-based tests for entry point detection completeness (0bf6487)
- Add property-based tests for ldflags override functionality (e44bd62)
- Add property-based tests for ldflags variable substitution (1994cdb)
- Add property-based tests for ldflags passthrough functionality (476ccb6)
- Enhance ldflags handling in Go Nix template (36cbb2a)
- Add ldflags handling in Go Nix template (5deb655)
- Add support for ldflags variable substitution in flake.nix generation (c4874e9)
- Add ldflags formatting function for Nix templates (de08f90)
- Add property-based tests for build tags formatting (bbb71ff)
- Add ldflags validation and substitution functions (9e70d1a)
- Add property-based tests for build tags validation (4c76117)
- Add support for conditional build tags in Go templates (f6092e6)
- Add validation functions for Go build tags (c4416d6)
- Add CGO configuration override tests to enhance validation (0b3f6e1)
- Add comprehensive CGO detection tests to enhance accuracy (b06b3b0)
- Add CGO detection functionality to the detector package (a895f11)
- Refactor CGO detection logic in Go detector (3f7354a)
- Enhance GenerateFlake to support CGOEnabled pointer handling (5b32600)
- Update mergeConfigs to handle CGOEnabled as a pointer (77ef22c)
- Update genBuildConfig to use pointer for CGOEnabled field (0e65217)
- Refactor CGOEnabled handling in user configuration and merge logic (22ed84a)
- Update GenerateFlake to handle CGOEnabled as a pointer (683bbad)
- Update genBuildConfig to handle CGOEnabled as a pointer (52f8175)
- Refactor CGOEnabled handling in template tests and engine logic (8601589)
- Add additional Go-specific fields to BuildConfig for enhanced build customization (72743df)
- Refactor CGOEnabled field in BuildConfig to use a pointer (067479e)
- Add Go-specific build configuration fields to BuildConfig (5f63c13)
- Add error handling for API responses and enhance server settings (633e1be)
- Add default resource configuration fields to server settings template (2316aef)
- Add cleanup API endpoints and settings handlers (80969b5)
- Add cleanup settings template for managing disk space policies (c46e534)
- Add platformConfigMiddleware to load backend configuration into context (77d537d)
- Refactor PlatformConfig and introduce StatusMapping type (34db271)
- Add ConfigCache for thread-safe platform configuration caching (8cde5fb)
- Enhance DeploymentStatusBadge template with context-aware status mapping (7afedda)
- Enhance common template with context-aware configuration retrieval (a08858d)
- Add DatabaseConfigScript to detail template for backend database configuration (059c0ad)
- Enhance DeploymentStatusBadge template to support dynamic status mapping (2839857)
- Add property-based tests for Git source type unification in service creation (4da8420)
- Enhance service detail template with friendly source type display and flake detection notice (31bbf47)
- Add migration notice for legacy image source type in service detail template (b9c1b4e)
- Integrate organization context into API client requests (f55de7f)
- Enhance API client to support organization-specific requests (3c62086)
- Add property-based tests for app update version handling and serialization (2bc09c2)
- Enhance handleUpdateApp function with improved validation and error handling (97d3b81)
- Add application settings form to detail page (016516d)
- Add property-based tests for dashboard statistics passthrough and JSON round-trip validation (add925f)
- Implement error handling in dashboard data retrieval (d4cb2af)
- Refactor GetDashboardData method to improve data fetching and error handling (fc4995f)
- Add error handling to dashboard template for stats endpoint failures (20fe32d)
- Refactor app update handling to support optional fields and optimistic locking (14a10f8)
- Enhance API client with new resource management and dashboard statistics features (407d310)
- Add property-based tests for authentication validation completeness (aee71d4)
- Enhance authentication middleware to validate user tokens and manage session cookies (3bca57e)
- Refactor sidebar layout to handle user and organization context more gracefully (c797b87)
- Add transaction rollback tests for app operations (2d1429e)
- Add default handling and validation methods for ServiceConfig (62f2153)
- Add property-based tests for ServiceConfig JSON round-trip consistency (91d3e33)
- Add tests for default resource application in service creation (2a4fbdb)
- Add GetDefaults method to ConfigHandler for retrieving default resource values (10e02d8)
- Add defaults endpoint to config handler in API (fad6dd9)
- Update README.md to enhance project documentation and feature overview (8744114)
- Add UpdateHeartbeatWithDiskMetrics method to statsNodeStore for testing purposes (32a2620)
- Add UpdateHeartbeatWithDiskMetrics method to MockNodeStore for testing enhancements (1e62a48)
- Add DiskMonitor for automated disk usage monitoring and cleanup (b98dbf2)
- Add UpdateHeartbeatWithDiskMetrics method to mockNodeStore for enhanced testing (bd67ff1)
- Refactor node routes in API to enhance functionality (bd8d28b)
- Enhance control plane proto with disk metrics support (8a8897a)
- Implement disk metrics handling and automatic cleanup in NodeHandler (bd59524)
- Enhance Node model with disk metrics support (3744b63)
- Add UpdateHeartbeatWithDiskMetrics method to mockNodeStore for enhanced testing (e092356)
- Enhance NodeStore interface with UpdateHeartbeatWithDiskMetrics method (c5b4a5a)
- Enhance NodeStore with detailed disk metrics handling (3829877)
- Add disk metrics columns to nodes table for enhanced monitoring (d3871c4)
- Add admin cleanup routes to API for resource management (5b9a7f1)
- Add CleanupHandler for managing cleanup operations in the API (4b3f3ae)
- Add container and image management functionalities to Client (144a740)
- Add cleanup service and tests for resource retention policies (23ee212)
- Implement resource validation and service renaming functionality in ServiceHandler (c2bc008)
- Update app name uniqueness tests and database schema for organization context (4326f43)
- Add mock stores for deployment and secret management in app deletion tests (c4ac343)
- Add dashboard statistics endpoint to API for organization-specific data retrieval (0432232)
- Add StatsHandler and dashboard statistics endpoints for organization-specific data retrieval (2c8223b)
- Add config endpoint to API for platform configuration retrieval (a569ec8)
- Add ConfigHandler for platform configuration management (64f5317)
- Enhance RequireOwnership middleware to verify user organization membership (d9c5aa9)
- Add organization context middleware and tests for access control (b415e27)
- Add ListByOrg method to mockAppStore for organization-specific app listing (29d5da0)
- Add CountByStatusAndOrg method to mockDeploymentStore for deployment status counting (5658203)
- Add ListByOrg method to mockAppStore for testing organization-based app retrieval (a02a1d1)
- Add org_id and version fields to apps table in secrets_property_test.go for enhanced organization and version control (cf2ccb3)
- Add ListByOrg method to AppStore and CountByStatusAndOrg method to DeploymentStore; enhance OrgStore with IsMember and GetDefaultForUser methods (594464c)
- Add IsMember and GetDefaultForUser methods to OrgStore for organization membership checks and user-specific organization retrieval (de892ae)
- Add IsMember and GetDefaultForUser methods to MockOrgStore; implement CountByStatusAndOrg in MockDeploymentStore; enhance ListByOrg in MockAppStore (58680c7)
- Add ListByOrg method to AppStore and corresponding tests for organization-based app retrieval (667bf32)
- Add CountByStatusAndOrg method to DeploymentStore; enhance apps table with org_id and version fields (e9d32a9)
- Add org_id and version fields to apps table; implement optimistic locking in app updates with conflict detection (5a25434)
- Add ErrConcurrentModification for optimistic locking conflicts in PostgreSQL (604c4d9)
- Add service name validation and property-based tests for DNS label compliance (7cdcd42)
- Add database validation functions and property-based tests for supported types and versions (457ee1d)
- Add resource validation functions and property-based tests for CPU and memory specifications (e2103a9)
- Add DependencyValidator and tests for circular dependency detection (b6430ac)
- Add property-based tests for BuildJob source field consistency (7e95de7)
- Refactor resource allocation model by deprecating ResourceTier in favor of ResourceSpec for direct CPU and memory specification. Update ServiceConfig to include Resources field. Enhance BuildJob with source type and flake URI validation for improved clarity and consistency in build sources. (e06a8f2)
- Add version field for optimistic locking and unique constraint on apps table; add source type and service name fields to builds table (87514c6)
- Add testdata (fb0c281)
- Remove empty .gitkeep files from internal, migrations, and pkg directories to clean up the codebase. (a2ba005)
- Remove deprecated Go files for checking deployments, app configurations, app dependencies, app services, and database columns. These files are no longer needed and their removal streamlines the codebase. (e864388)
- Add organization management functionality and enhance API routes (eeba3d1)
- Add organization routes and update service handler in API (ce96c7f)
- Add CanRegister method to AuthHandler for public registration status check (f2bbc75)
- Add organization handler with CRUD operations for API (5bb2bd4)
- Refactor secret listing to return decrypted values in API response (a2ae7c7)
- Implement development mode log streaming and heartbeat for server logs (b8e2726)
- Add build constraints to multiple Go files to prevent unintended execution (f3451fe)
- Add mock secret store implementation and enhance service handler for database credential generation (d687bf0)
- Update PostgreSQL startup and entrypoint scripts for improved variable handling (073547a)
- Refactor container name generation in terminal service connection (3646b54)
- Add organization management methods to API client (8854345)
- Add edit organization page template with form for updating organization details (13d2eae)
- Add new organization page template with form for creating organizations (7060a6f)
- Add theme detection and dynamic updates for terminal in settings page (0237fae)
- Add application CRUD round-trip test to validate creation, retrieval, and deletion of applications (05248b1)
- Add service CRUD round-trip test to validate service creation, retrieval, update, and deletion (7f31e99)
- Add application CRUD round-trip tests and verify non-deleted app listing (9ff376b)
- Add terminal service for WebSocket-based terminal access to deployed containers (8a8cb3e)
- Add terminal tab and interactive shell for running services (7c419a9)
- Add empty state components for apps and nodes in dashboard template (fd2c7ff)
- Add domain management routes and handlers in web API (6d40975)
- Add global domain management routes to API (2996b0f)
- Implement domain validation and management enhancements (404f4b2)
- Add ListAll method to MockDomainStore for retrieving all domains (988d6ad)
- Enhance Domain struct by adding IsWildcard and Verified fields (498ba62)
- Add ListAll method to DomainStore interface for retrieving all domains (7b9918c)
- Enhance domain management by adding is_wildcard and verified fields to domain operations (1e8b5eb)
- Add domain management API methods for listing, creating, and deleting domains (d666bf1)
- Add domains list page template with domain management features (cbf0c6c)
- Add columns for wildcard and verification status in domains table (11499ae)
- Enhance node listing with API URL for registration instructions (85d63c7)
- Enhance nodes list page with add node dialog and detailed registration instructions (a6f1a00)
- Refactor migration process in Makefile to simplify execution (ab8b4ab)
- Update organizations and org_memberships migration to ensure idempotency and improve database integrity (415de03)
- Remove consolidated schema migration file, streamlining database management by eliminating redundant schema definitions and associated triggers. This change simplifies the migration process and reduces potential conflicts in future database updates. (91728e6)
- Enhance HealthMonitor with deployment timeout and resource tracking (2d63248)
- Add deployment status handling in Scheduler for queued deployments (78a092b)
- Enhance SchedulerConfig with DeploymentTimeout for improved deployment management (c1ee689)
- Add Invitations method to serviceMockStore for testing purposes (697bc05)
- Refactor SecretHandler to integrate SOPS service for secret encryption (bffa62f)
- Add InvitationsHandler for managing user invitations (ad967a8)
- Enhance AuthHandler with RBAC integration for user registration (a6b44c0)
- Add Invitations method to mockStore for testing purposes (2d5f060)
- Add SOPS service integration and new invitation routes (a57c4b2)
- Add ListRunning and ListQueued methods to mockBuildStore for build status retrieval (ab01f68)
- Implement startup recovery for pending and interrupted builds (1b23ecb)
- Add invitation acceptance and user management routes (121fd2d)
- Add UsersHandler for user management HTTP requests (0367b5d)
- Add Invitations method to mockStore for testing purposes (5f79888)
- Add property-based tests for RBAC functionality (e060501)
- Add RBACService for role-based access control management (6834f1e)
- Add methods for managing build statuses and user roles (9cd81d3)
- Add RecoveryService for build job processing and recovery (11c2f8f)
- Add Invitation model with status management and validation methods (c0d080f)
- Add unit tests for SOPS service encryption and decryption (ed959b0)
- Add SOPS service for age-encrypted secrets management (852a775)
- Add InvitationStore interface and user role management enhancements (2e0d868)
- Add ListRunning and ListQueued methods to BuildStore for managing build statuses (6006984)
- Enhance PostgresStore with InvitationStore integration (841db69)
- Add InvitationStore implementation for managing user invitations in PostgreSQL (79a0bbd)
- Refactor user creation and retrieval methods to support roles and invited_by field (c9f1e2b)
- Update dependencies in go.mod and go.sum (3b50c0d)
- Add SOPS configuration for secrets encryption in Config struct (dead3b4)
- Add user roles and invited_by columns to users table for RBAC (8e3fef1)
- Add invitations table for user invitation system (496bab3)
- Add user and invitation management methods to API client (20e28bd)
- Add invitation acceptance and user management pages (bd58593)
- Enhance LogStreamHandler with broker integration and improved event handling (aabee2d)
- Add Git provider implementations for Bitbucket, Gitea, GitHub, and GitLab (6a006cc)
- Add log broker implementation for real-time log streaming (4c0f6d1)
- Add log container implementation for managing log entries (eeb1e1e)
- Enhance live log streaming and Git provider configuration (4bbf38e)
- Add deployment pipeline visualization and flow stages to service detail page (9842ce4)
- Add database service templates and property tests for Nix configuration (4c0201a)
- Add detection API proxy and enhance service creation logic (3cc6177)
- Refactor service addition dialogs and update dropdown options (9943689)
- Add PostgreSQL database template for Nix build configuration (a67a5ac)
- Add MySQL database template for Nix build configuration (6b31cc6)
- Add MongoDB database template for Nix build configuration (56bb98c)
- Add MariaDB database template for Nix build configuration (f1873bb)
- Add Redis database template for Nix build configuration (53b6145)
- Add deployment property tests for rollback functionality (fee7994)
- Update controlplane.proto and controlplane.pb.go to include version and app_name fields in CPDeployRequest (30444ac)
- Add version assignment in deployment creation and rollback processes (9e365f8)
- Add GetNextVersion method to MockDeploymentStore for version management (c5d31b9)
- Add GenerateContainerName function and update ContainerName method in Deployment model (37c15e5)
- Add container name uniqueness tests to models_property_test.go (bb5f32f)
- Add GetNextVersion method to DeploymentStore interface (aeb9d9a)
- Add version field to deployment command and implement new mock methods (2fb86a4)
- Add deployment version monotonicity tests and implementation (73c46fd)
- Add comprehensive tests for service state action availability (d0af19e)
- Add service state derivation and update service detail response (da8f63b)
- Add service lifecycle management endpoints for stopping, starting, reloading, and retrying services (21ba9d1)
- Add service management endpoints for stopping, starting, reloading, and retrying services (e578ca7)
- Add ServiceState and ServiceAction models for service management (40e6fcc)
- Add service management methods to Client API (dad63c6)
- Implement dynamic service action buttons based on service state (e679986)
- Add icon_url field to secrets_property table in PostgreSQL schema (9f909a7)
- Add icon_url field to deployments table in PostgreSQL schema (70c416c)
- Add icon_url field to apps table in PostgreSQL schema (28182bd)
- Enhance ServiceHandler with language detection and service configuration detection (b4cc56a)
- Add comprehensive tests for build type determination based on strategies and languages (321a7fa)
- Add build type determination functions for strategies and languages (2804e32)
- Update validation messages and build strategy tests to include database option (8c9a000)
- Add breadcrumb switcher template and sidebar organization switcher (bbec0fb)
- Add mock implementations for OrgStore and related methods in testing files (6ca1dd6)
- Add organization management functionality with PostgreSQL integration (c7d7129)
- Add organizations and org_memberships tables with initial setup (97fddb0)
- Refactor migration process to support consolidated schema application (caa2f12)
- Implement service management enhancements with domain support (d157226)
- Add domain management functionality with PostgreSQL integration (5d53a4b)
- Add consolidated schema migration for Narvana Control Plane (e265d30)
- Add new utility scripts for checking application deployments, configurations, and services (17e8358)
- Enhance application and service management with new fields and UI improvements (7794d4c)
- Add Nix template for Narvana Database setup (0b0ee6d)
- Remove create app route and update app creation logic to include description and icon URL fields. The handleCreateApp function is deleted, and the handleCreateAppSubmit function is modified to handle the new fields, improving application metadata management. (fbdece4)
- Update CreateAppRequest to include IconURL field for application creation (ddb8dab)
- Add IconURL field to App struct for enhanced application metadata (d6feccf)
- Update AppStore methods to include icon_url field in database operations (45d5c19)
- Add icon_url column to apps table in migration script (e2aaa49)
- Enhance App and CreateAppRequest structures with additional fields (a55de06)
- Refactor sidebar and apps list page for improved UI and error handling (34e52fb)
- Remove create app template file (aa4a807)
- Refactor apps list page to use card components and enhance UI (385e23d)
- Implement Deployments and Builds management pages and secure notification settings (174d14b)
- Refactor deployment routes and add build routes to API server (bcdf2d0)
- Add BuildHandler for managing build-related HTTP requests (040cd42)
- Add ListAll method to DeploymentHandler for user-specific deployment retrieval (eb98211)
- Add List and ListByUser methods to MockBuildStore and MockDeploymentStore (3dc0d29)
- Add user-specific retrieval methods to BuildStore and DeploymentStore (a9e37ef)
- Refactor build and deployment retrieval methods to enhance user-specific queries (586a3cb)
- Add deployment and build management methods to API client (0d5a6c5)
- Enhance switch component with icon customization and add textarea component (3fce7b6)
- Add sidebar state middleware to manage sidebar collapse state (61048c8)
- Implement tri-state theme switching and enhance sidebar functionality (80911a8)
- Refine transitions and theme switching logic for improved user experience (32ca47a)
- Refactor theme switcher and input styles for improved transitions and icon updates (555767a)
- Add user profile retrieval and update methods to API client (13a33c2)
- Enhance switch component with icon integration and styling updates (185deae)
- Add user context middleware and profile management routes (f907b1c)
- Add user profile routes to API for enhanced user management (85022e3)
- Add UserHandler for user profile management with GET and PATCH endpoints (5886877)
- Add GetByID and Update methods to MockUserStore for improved user management (708821a)
- Update User struct and UserStore interface for enhanced user management (208a5be)
- Enhance user retrieval and update functionality in UserStore (e478fba)
- Add switch component and integrate theme switcher in sidebar and profile settings (5c0d921)
- Remove general settings template file (947ec13)
- Add user profile fields to the users table (b85591c)
- Add server stats streaming endpoint for enhanced monitoring (f470b05)
- Add server stats endpoints for improved monitoring (44051ef)
- Add server stats handler for real-time system monitoring (1461ce4)
- Enhance server stats page with real-time monitoring and improved layout (52e0a77)
- Enhance terminal interface with improved layout and termination confirmation (1491a00)
- Add control message handling for terminal WebSocket connections (972bda5)
- Refactor WebSocket initialization and resize handling in terminal settings (0a40475)
- Add terminal WebSocket handler and service restart functionality (cff42e2)
- Add server restart and console WebSocket handlers (c38c06e)
- Add server settings enhancements with reload services and terminal console (3eca27b)
- Add server restart and console WebSocket routes (3775dbd)
- Update go.mod and go.sum to include new indirect dependencies for pty and websocket (5dde9d5)
- Add server log streaming and download functionality (7ff67a3)
- Add server log streaming and download handlers with settings pages (47e180a)
- Add server management routes for logs streaming and downloading (172fa2c)
- Implement server logs and stats pages with navigation and real-time log streaming functionality. Update sidebar menu item for settings to reflect new structure. Enhance deployment version display format in app details. (28dff82)
- Optimize GetDashboardData method by implementing parallel fetching for apps, nodes, and recent deployments, improving performance and responsiveness. Introduced synchronization mechanisms to ensure thread safety during data collection. (692f3c8)
- Refactor health check function in install script for improved service verification. The function now accepts a URL and service name, enhancing clarity and reliability in checking service health status. (452937b)
- Redirect root to Web UI and remove inline HTML serving for authentication. This change streamlines the routing logic by directing users to the separate Web UI, enhancing the overall user experience. (70b7c48)
- Remove UI HTML files for authentication and device authorization, streamlining the codebase by eliminating unused components. (c8b90b0)
- Added fmt import to main.go for improved logging capabilities (c46dbbf)
- Refactor web server logging and add health check endpoint (34c1a96)
- Enhance install script by adding error handling with 'set -e' and 'set -o pipefail' for improved reliability during execution. This change ensures that the script exits on errors, preventing potential issues during the installation process. (705091d)
- Update install script to use 127.0.0.1 for INTERNAL_API_URL and enhance service verification process. This change improves reliability for local communication and adds a health check for services after installation, ensuring better feedback on service status. (21ccf14)
- Add SettingsStore interface for global system settings management (6b647c6)
- Add MockSettingsStore for testing and update MockStore to include settings (f561d18)
- Add GitHub routes to API for enhanced integration (f98912c)
- Update web server configuration to use 0.0.0.0 for binding and improve error handling on startup. Change localhost references to 127.0.0.1 for internal API calls, enhancing reliability in different environments. (464efcc)
- Refactor PostgresStore to include sub-stores for better organization and management (b6a2335)
- Update install script to use raw public IP for API and web URLs, removing reliance on magic domain. This change simplifies the environment configuration and ensures accurate URL generation for deployments without a public IP. (645fcca)
- Enhance getBaseURLs method to prioritize database settings for API and web URLs (95d3712)
- Add settings handlers for general and server configurations (1d0040b)
- Refactor GitHub routes and add Settings routes to API (23ea7f5)
- Add SettingsHandler for managing global settings API endpoints (d9f41dd)
- Add Settings method to Store interface (bfe8952)
- Add SettingsStore implementation for PostgreSQL (8f6c6c7)
- Add settings table and initial seeding for global configuration (95339fd)
- Add settings methods to API client (88e41a4)
- Add server settings page and update sidebar navigation (2bb7c9f)
- Update API client configuration to prioritize INTERNAL_API_URL. If not set, fallback to API_URL, ensuring more flexible environment setup for the Narvana Control Plane. (efbe4da)
- Update install script to dynamically set DOMAIN based on PUBLIC_IP. Added support for INTERNAL_API_URL and updated API_URL and WEB_URL to reflect the public domain, enhancing environment configuration for the Narvana Control Plane. (8acd0ef)
- Enhance install script to improve environment configuration handling. The script now generates or repairs the environment file, checks for missing API_URL, and fixes malformed DATABASE_URL entries. Additionally, it ensures proper permissions for the environment file and updates PostgreSQL user passwords when necessary, streamlining the installation process for the Narvana Control Plane. (2210560)
- Refactor install script (ef2a5ec)
- Update README to correct installation script URL from 'main' to 'master' branch for Azure VPS deployment (9141a69)
- Enhance install script with repository branch and URL configuration, improved public IP detection, and refined database migration handling. The script now supports customizable repository settings and ensures successful application of database migrations, improving the installation process for the Narvana Control Plane. (fa3865d)
- Improve error handling in registration process (ec4e52f)
- Update README (f6574d9)
- Add one-click installer script for Narvana Control Plane (110165b)
- Add systemd service file for Narvana Control Plane Web UI (8694d9a)
- Add GitHub routes to server for handling callbacks and configurations (bfc69fd)
- Add GitHubHandler for managing GitHub App interactions (1833167)
- Add mock implementations for GitHub and GitHubAccount stores in tests (85bb017)
- Add GitHub API client implementation for managing app credentials and repositories (d144814)
- Add GitHub models for application, installation, repository, and account representation (9749aa1)
- Add GitHubStore and GitHubAccountStore interfaces for managing GitHub App and OAuth operations (c12b13b)
- Add GitHub account and configuration management to PostgreSQL store (bc951aa)
- Refactor database schema for GitHub integration (d14acf3)
- Implement GitHub integration methods in API client (76dcf92)
- Add skeleton loading animation and implement checkbox functionality for Git integration (8fce228)
- Integrate Git repository selection into app detail page and update base layout (fc63cef)
- Add Git settings page template for GitHub integration (9309ac1)
- Refactor web application routing and enhance GitHub integration (598783f)
- Add checkbox component and integrate into base layout (3e57432)
- Refactor service creation logic to incorporate category-based handling (8b4effd)
- Add build strategy and configuration options to service creation request (c0b45ab)
- Refactor service addition UI with dropdown and dialog components (0059e26)
- Enhance application management and settings functionality (3e69a29)
- Add .templui.json configuration file for component and utility paths (be0a51b)
- Add live log streaming, auto-refresh, and UI enhancements for Narvana Control Plane (e6a31db)
- Add selectbox component and integrate into existing templates (9f76c0e)
- Refactor templates to enhance user feedback and navigation (eb26671)
- Add live log streaming and auto-refresh for build status in detail page (b9c8111)
- Implement user authentication and enhance app management routes (288d5bf)
- Add API client methods for user authentication, app management, and service operations (973ea8c)
- Add new templates and functionality for user authentication and management (b514914)
- Implement settings page handlers for general settings and API keys (5251401)
- Add API keys management template for user settings (a7c75d5)
- Enhance web handlers for deployments, builds, and nodes management (0219dab)
- Add new templates for builds, deployments, and nodes management (7e7c7b3)
- Refactor dashboard and apps handlers to utilize API client for dynamic data fetching (5a0b5d2)
- Add new templates for app management: create, detail, and list pages (2be91ab)
- Initialize API client in web server and enhance dashboard data fetching (c8e02c1)
- Add API client implementation for control-plane communication (1480d21)
- Enhance dashboard template with recent deployments and node health data (89e38a8)
- Implement new routing and handlers for web UI using Chi router (a52348c)
- Remove embedded web UI from server setup and update routing to serve basic auth UI directly. The web UI is now hosted separately on port 8090, streamlining the server's responsibilities. (b198e19)
- Remove Home template file to streamline the codebase and eliminate unused components. This change follows the recent integration of templui components, enhancing the overall structure and maintainability of the project. (e65897c)
- Add new templui components: Input, Label, Progress, Tabs, and Toast (78092abb)
- Add new templui components: Alert, AspectRatio, Badge, Breadcrumb, Card, Form, Input, Label, Progress, Separator, Skeleton, Table, Tabs, and Toast (6d0abaa)
- Update .gitignore to refine patterns for generated files and remove unnecessary exclusions (547b604)
- Add templui utility functions for Tailwind CSS and random ID generation (afd9ce3)
- Add sidebar color variables to input.css (5c71a1e)
- Refactor Home template to integrate new sidebar components (d253fc8)
- Remove embedded web UI implementation from ui/embed.go (cfcf38f)
- Add icon components and definitions for templui (e9eacca)
- Add new templui components: Avatar, Collapsible, Dialog, Dropdown, Popover, and Sidebar (1679708)
- Add templui components for Avatar, Button, Collapsible, Dialog, Dropdown, Popover, Sheet, Sidebar, Tooltip (fe3b5e1)
- Add Go environment setup and templui CLI installation in flake.nix (0de004b)
- Update go.mod and go.sum to add dependency on github.com/Oudwins/tailwind-merge-go v0.2.1 (610f6f3)
- Add initial web UI templates and styles (9881304)
- Add main.go to implement web server for serving assets and home page (6812027)
- Update Procfile.dev to add templ and Tailwind CSS commands for improved development workflow (516529d)
- Update Makefile to streamline web UI build process with templ and Tailwind CSS integration (82c9a6a)
- Update go.mod and go.sum to include new dependency on github.com/a-h/templ v0.3.960 and update testify to v1.10.0 (69483ac)
- Update flake.lock to include new dependencies and revisions (eae7e39)
- Update .gitignore to include templ generated files and remove SvelteKit build cache entries (cc8e07a)
- Add templ package to flake.nix for enhanced templating support (78b16e0)
- Remove files and configurations from the web directory (464e9a0)
- Update components index to include ServiceCard export (95e4ec6)
- Add ServiceCard export to domain components index (0a8629f)
- Add ServiceCard component and corresponding tests for service display (df59c2b)
- Refactor date generation in dashboard stats tests to use reliable ISO date strings (df3d2dd)
- Add form utility functions and tests for dirty state detection (3fae466)
- Enhance Application Page with New Features and Improved UI (5407201)
- Add domain-specific components index file (55faf1d)
- Add AppCard export to components index (7ff7292)
- Enhance Applications List Page with new features and improved UI (01e1727)
- Add AppCard component and corresponding tests for application display (b1b1b07)
- Add dashboard statistics utility and corresponding tests (7762afd)
- Enhance Dashboard with new components and resource utilization stats (16fc44d)
- Refactor appId type declaration and enhance delete button click handler (f9c482b)
- Enhance Card, Checkbox, EmptyState, Input, and Select components with new features and improvements (e94fc02)
- Add lucide-svelte dependency to package.json and bun.lock (21cad8f)
- Add search utility functions and corresponding tests (c65f2c4)
- Add form validation utilities and corresponding tests (2382120)
- Add env-parser utility functions and tests for .env file handling (161fda0)
- Enhance main layout with responsive sidebar, header, command palette, and toast notifications (b69d1b8)
- Add layout components: Sidebar, Header, CommandPalette, and PageHeader with navigation utilities and tests (fe435f4)
- Add Dialog, EmptyState, Toast, and ToastContainer components with tests and store integration (ee3b436)
- Add unit tests for DataTable sorting behavior (3ad1135)
- Add ResourceBar component with utilization display and tests (1a315b0)
- Add DataTable component with sorting, loading, and empty state support (d59e847)
- Add Checkbox, Select, Toggle, and Tabs components with styling and functionality (9810a54)
- Update test scripts in package.json to use bun for running unit and end-to-end tests (011f461)
- Add Badge, Card, Button, Input, and StatusBadge components with tests (ddeda28)
- Add fast-check library for enhanced testing capabilities (4a4b7fa)
- Add theme.css for professional light theme design tokens (b06efaf)
- Add utility functions for formatting timestamps and data (37cf6f9)
- Update layout.svelte to change font and enhance login prompt styling (548a310)
- Refactor layout.css to implement a professional light theme and enhance global styles (bbdf9c5)
- Add default port configuration for services in Create handler (2af5ff8)
- Refactor DNS setup script to use Nix-provided tools and streamline execution (b796596)
- Enhance Caddyfile and add dnsmasq configuration for wildcard DNS support (5424d80)
- Update .gitignore (c8d6f36)
- Implement domain configuration and service editing features in the web UI (ed95e39)
- Enhance DNS setup and service management in README (c26dfd5)
- Add setup-dns package and application to flake.nix (6623624)
- Add setup scripts for wildcard DNS configuration (35a02bd)
- Update Makefile to include web UI build and development targets (03dc926)
- Add Caddy and Attic client/server to Nix shell environment (b19f5ed)
- Update .gitignore (7876fd1)
- Add web, Caddy, and attic commands to Procfile.dev for enhanced development setup (55fea78)
- Add scheduler functionality to the API main loop (ef43791)
- Add Attic configuration to worker setup with default token (14c3387)
- Add configuration files for Attic server and Caddy routing in development environment (4dd65ff)
- Implement real-time log streaming and enhance API routing for embedded UI (17befdf)
- Add heartbeat update for NodeManager and entrypoint override in ContainerConfig (1f6fb46)
- Add init-attic.sh script to initialize Attic cache for Narvana development (01f70ff)
- Add embedded web UI handler for control plane (bb75508)
- Add configuration files for project setup including .gitignore, .npmrc, .prettierignore, and .prettierrc (6096484)
- Add initial project setup with Svelte, ESLint, and Playwright configuration (954a542)
- Add initial HTML structure and layout styles for Narvana theme (dc43cc4)
- Add layout configuration for prerendering and SPA mode (25d9a19)
- Add API client and global state management for Narvana control plane (3bd0243)
- Add new Svelte components for UI elements including Button, Card, Input, Sidebar, and StatusBadge (434d4cf)
- Add layout component for routing and authentication handling (7900b03)
- Add initial routes for application management and user authentication (b22ad3f)
- Enhance BuildStore to support additional fields in builds (435d4b4)
- Enhance ContainerConfig in Podman client to support privileged mode and user namespace (2b85ebb)
- Refactor Go Nix template to streamline dependency management and build process (91cdc14)
- Enhance logging in AutoGoStrategyExecutor to track flake generation status (2bbf66a)
- Enhance error handling in NixBuilder to preserve logs on build failure (9ef741b)
- Refactor NixBuilder to create a clean source directory for builds (ddcf00a)
- Enhance NixBuilder to support generated flakes and improve build process (1e602e6)
- Update Nix image reference to use Docker Hub in worker and builder configurations (7d584ce)
- Add property-based tests for log streaming behavior in build lifecycle (1e486e4)
- Add property-based tests for Pure-Nix Artifact Push and Push Stage Reporting (90147b3)
- Add validation error handling and retry logic enhancements (0a19775)
- Add property-based tests for database record handling in build jobs (35deeb9)
- Add new error for missing required executors in the executor package (19f036f)
- Add property-based tests for build type enforcement in Dockerfile and Nixpacks strategies (ff20e69)
- Add validation for build job state transitions and enhance progress tracking (04bd37c)
- Add build job state transition validation and artifact type handling (b4b6d26)
- Add property-based tests for executor registry completeness and interface compliance (f90e0d0)
- Add comprehensive property-based tests for build job state persistence and validation (83d8878)
- Enhance BuildJob structure to include BuildStrategy and BuildConfig fields (e598635)
- Add lifecycle property tests for build job state machine and terminal state immutability (c2f9674)
- Add auto-* strategy executors to worker (4337dab)
- Refactor error handling in AutoDetector to use custom error types (054aa56)
- Enhance error handling in DefaultDetector for language detection (93f4e2a)
- Add enhanced error handling for the build system (666676d)
- Refactor error handling in template engine (9befaea)
- Add flexible build strategy support to services and builds (8affc1d)
- Add preview endpoint to server router (6bc0e3c)
- Add PreviewHandler for generating build previews (e83f8cc)
- Add build strategy and configuration fields to service requests (aa4101f)
- Add detection endpoint to server router (c2672c6)
- Add property-based tests for detection API response completeness (f5f11f9)
- Add DetectHandler for build strategy detection (29117a7)
- Add metrics collection and performance tracking functionality (4c9bdee)
- Add error definitions for metrics management (6c37d78)
- Add error definitions for cache management (03692a2)
- Add property-based tests for cache key consistency and behavior (a1a25c3)
- Add build caching functionality for faster rebuilds (fb80145)
- Add property-based tests for build job timeout enforcement and validation (336a2f1)
- Implement build job validation and progress tracking (ded4c98)
- Add error definitions for retry management (b5990a7)
- Add property-based tests for retry management functionality (a8a4db8)
- Add build retry management functionality (b7f63ce)
- Add error definitions for executor management (08611a1)
- Add strategy executors for multiple programming languages (f32c987)
- Add Flake and Nixpacks strategy executors for build management (065c762)
- Add error definitions for entry point management (8c5482f)
- Add entry point selection and validation logic (2667ee2)
- Add error handling for flakelock package (069cda8)
- Add flake.lock management and property-based tests (fd0685f)
- Add hash calculation and testing for vendor dependencies (182370e)
- Add property-based tests for build type selection strategies (ad0758f)
- Add build type selection logic and recommendations (6cc8a66)
- Add Dockerfile Nix template for application builds (9357aa4)
- Add template engine and tests for Nix flake rendering (688c0b6)
- Add Nix templates for Go, Node.js, Python, and Rust applications (19024ef)
- Add language detection implementations for Go, Node.js, Python, and Rust (4057fac)
- Add error handling for language detection in the detector package (97164ad)
- Add AutoDetector for repository build strategy detection (c4146d2)
- Add build strategy detection implementation and tests (c164a91)
- Add build strategy and configuration fields to ServiceConfig (1200220)
- Add build strategy and framework detection models (3bf72a9)
- Add tests for build strategy determinism in models_property_test.go (3eeff76)
- Add mockBuildStore implementation for testing deployments (6e55e67)
- Remove build_type reference from TestOwnerAccessAllowed in auth_property_test.go to maintain consistency with recent model updates. This change simplifies the test case following the removal of the build_type field from the App struct. (3a8b926)
- Remove build_type reference from auth_property_test.go to align with recent model updates. This change simplifies test cases and maintains consistency following the removal of the build_type field from the App struct. (f994938)
- Refactor application property tests to remove build_type parameter from test functions, simplifying the test cases. This change aligns with recent model updates and ensures consistency following the removal of the build_type field from the CreateAppRequest structure. (f3c741d)
- Remove build_type field from CreateAppRequest and related logic in Create method, aligning with recent model updates. This change simplifies app creation by ensuring that build type is no longer a required property, following the removal of build_type from the App struct. (687b8de)
- Refactor deployment property tests to remove build_type references, ensuring alignment with recent model updates. This change simplifies test cases and maintains consistency following the removal of the build_type field from the App struct. (85c7614)
- Remove build_type references from service property tests to align with recent model updates. This change ensures consistency across test cases following the removal of the build_type field from the App struct. (3e749ce)
- Remove build_type field from App struct in models. This change aligns with recent migration updates and ensures consistency in app properties. (e77f6c7)
- Refactor deployment creation logic to determine build type based on service source type. Updated Create and CreateForService methods to use the new determineBuildType function, ensuring accurate build type assignment for deployments. (936ae13)
- Refactor app generation logic in models_property_test.go to remove build_type reference. Updated the app creation structure to reflect the removal of the build_type field, ensuring consistency with recent migration changes. (c24db3b)
- Remove build_type column from apps and related test files, updating app creation and retrieval logic accordingly. This change aligns with the recent migration updates, ensuring consistency in app properties and simplifying the data model. (0feb67d)
- Remove build_type column from deployments_property_test.go and introduce genBuildType function for generating random build types. This change aligns with the recent migration updates and enhances test data generation for deployments. (51f61e6)
- Remove build_type column from secrets_property_test.go and adjust app creation logic to exclude it. This change aligns with the recent migration updates, ensuring consistency in app properties. (207b595)
- Refactor createBuildJobForService to accept context and create build records in the database. Updated Create and CreateForService methods to pass context for job processing, ensuring proper handling of build job creation and database interactions. (10b3747)
- Enhance job processing logic in worker. Added checks for existing build records and deployments, handling orphaned jobs and failed deployments gracefully. Updated job status management to ensure accurate state representation and prevent unnecessary retries. (1406df8)
- Remove build_type column from apps table in migration 006. Build type is now determined per-service via source_type in the services JSONB. (a70bc30)
- Enhance app creation and validation logic. Updated CreateAppRequest validation to make build type optional, defaulting to 'oci' if not provided. Improved app ID retrieval in Get and Delete methods to prioritize middleware resolution, ensuring consistent handling across operations. (e189ee6)
- Refactor deployment handlers to utilize resolved app ID from middleware. Updated Create, List, and CreateForService methods to first attempt to retrieve the app ID from context, falling back to URL parameters if necessary, ensuring consistent app ID handling across deployment operations. (00fe2b9)
- Refactor log and secret handlers to utilize resolved app ID from middleware. Updated Create, List, and Get methods to first attempt to retrieve the app ID from context, falling back to URL parameters if necessary, ensuring consistent app ID handling across these operations. (05b7ffc)
- Refactor service handlers to utilize resolved app ID from middleware. Updated Create, List, Get, Update, and Delete methods to first attempt to retrieve the app ID from context, falling back to URL parameters if necessary. This improves consistency in app ID handling across service operations. (19f6b18)
- Enhance RequireOwnership middleware to support app ID resolution by both UUID and app name. Added context storage for resolved app ID and improved error handling for ownership checks, enhancing resource access management. (efe7396)
- Enhance Register method in gRPC handlers to validate node ID. Added checks for UUID format and generate a new UUID if the provided ID is invalid or empty, improving ID management and compliance with database requirements. (bf398c1)
- Add property-based tests for GRPC deployment command handling. Implemented tests to validate command completeness, retry classification, and successful deployments, enhancing the reliability and correctness of the gRPC agent client functionality. (ebfa942)
- Add GRPCAgentClient implementation for deployment command handling. Introduced methods for sending deployment and stop commands via gRPC, including retry logic and error handling. Added configuration struct for client settings, enhancing deployment management capabilities. (37e1f99)
- Implement gRPC server in API main function. Added configuration and initialization for the gRPC server, including error handling and graceful shutdown alongside the existing HTTP API server. This enhances the service's capabilities by allowing concurrent handling of gRPC and HTTP requests. (0997fbd)
- Add getter method for 'draining' field in HeartbeatRequest. This method allows retrieval of the node's draining status, enhancing the functionality for managing node states during deployments. (28bd044)
- Add 'draining' field to HeartbeatRequest message. This new boolean flag indicates when a node is shutting down and should not receive new deployments, enhancing node management capabilities. (2697556)
- Update Heartbeat method to handle node draining functionality. Added support for a 'draining' flag in heartbeat requests, allowing nodes to signal their draining status. This enhances node management and improves deployment reliability. (6e6d7f3)
- Implement node draining functionality in NodeManager. Added 'draining' flag to NodeConnection to prevent new deployments on draining nodes. Introduced methods to set and check draining status, and updated SendCommand to handle draining nodes appropriately. Enhanced GetAvailableNodes to return only healthy, non-draining nodes, improving deployment management and reliability. (3577dc3)
- Add property-based tests for gRPC status report validation. Implemented tests to ensure that FAILED status reports include exit code and error message, validate all status types, and confirm correct status mapping. This enhances the reliability and correctness of status reporting in the gRPC handlers. (9c27457)
- Enhance ReportStatus and PushLogs methods in gRPC handlers. Added validation for deployment status and updated timestamps for deployment lifecycle events. Improved logging for log entries and ensured graceful cleanup on stream closure. Introduced utility functions for status validation and log level mapping to enhance code clarity and maintainability. (cf184e6)
- Enhance WatchCommands method to integrate NodeManager for command streaming. Added error handling for connection registration and ensured proper unregistration on stream closure. Improved logging for better observability of node command streams. (3c5327f)
- Add property-based tests for deployment commands and node health management. Implemented tests to ensure deployment commands contain required fields, prevent duplicate deployments, and validate node health state transitions. This enhances the reliability and correctness of the gRPC node management functionality. (72e4b82)
- Add NodeManager integration to gRPC Server. Introduced NodeManager as a field in the Server struct, with methods for setting and retrieving the NodeManager instance. Enhanced server start and stop procedures to include health checking for the NodeManager, improving overall server management and reliability. (948f788)
- Add README.md for Narvana Control Plane. Documented development setup, production deployment instructions, available commands, and architecture overview to facilitate onboarding and usage of the control plane services. (4c8cd07)
- Add gRPC API definitions for Control Plane services. Introduced methods for node registration, heartbeat, command watching, and status reporting, along with health checks. Added property-based tests for serialization and deserialization of requests and responses, ensuring data integrity across the gRPC communication. (fd0f736)
- Add initial gRPC API definitions for the Control Plane. Introduced services for node registration, heartbeat, command watching, and status reporting, along with health checks. Added configuration examples and systemd service files for the API and worker, enhancing deployment and operational management. (a1cd71c)
- Add node registration and heartbeat by ID endpoints to the API. Introduced a new route for node registration and enhanced the heartbeat functionality to support individual node identification. This improves the API's capability to manage node states effectively. (b116dbb)
- Add gRPC handlers for node management. Implemented methods for node registration, heartbeat updates, deployment status reporting, log streaming, and command watching. Each method includes validation, error handling, and logging to enhance the reliability and observability of node operations. (21e101e)
- Add gRPC health check implementation. Introduced methods for server health status checking and streaming health checks, adhering to the gRPC Health Check protocol requirements. This enhances the server's reliability by providing health status information and PostgreSQL connectivity checks. (929dbc9)
- Add property-based tests for gRPC authentication and heartbeat metrics. Implemented tests to validate rejection of invalid, missing, and empty tokens, as well as ensuring heartbeat updates correctly store resource metrics. This enhances the reliability and security of the gRPC server operations. (aa5fab7)
- Add development Procfile for overmind process management. Includes commands for running the API and worker services, streamlining the local development workflow. (917f6f8)
- Update .gitignore to include additional entries for narvana-api, Overmind socket, log files, and local environment overrides. This improves the development environment by ensuring unnecessary files are ignored during version control. (a61b02d)
- Update Makefile to enhance development workflow. Added new database management targets for starting, stopping, and checking PostgreSQL status. Introduced development targets for running services with overmind, along with a comprehensive help section for quick start and service management instructions. Updated proto generation to include controlplane.proto. (1be0cac)
- Enhance development environment setup in flake.nix. Added overmind and tmux for process management, updated database URL variables, and improved PostgreSQL startup messages with detailed instructions for quick start, database management, and testing commands. (c8fd667)
- Add gRPC interceptors for authentication and logging. Implemented unary and stream interceptors to handle authentication token validation and request logging, including support for health check methods. This enhances security and observability for gRPC server operations. (361a352)
- Add gRPC server implementation for the control plane. This includes server configuration, health checking, authentication handling, and methods for starting and stopping the server. The server supports TLS and includes logging and context management for request handling. (e40cd76)
- Add node registration and heartbeat handling to the API. Introduced new request structures for node registration and heartbeat, including validation logic. Updated existing methods to support both old and new formats for node identification. Enhanced logging and error handling for node operations. (3242cca)
- Add migration to update service source configurations in apps table. This includes setting source_type based on populated fields (git_repo, flake_uri, image) and applying default values for git_ref and flake_output. Added documentation for the services JSONB column structure. (c0d23f8)
- Add service routes to the API for managing services, including creation, listing, retrieval, updating, and deletion. Integrated deployment functionality for services, allowing for service-specific deployments. This enhances the overall service management capabilities within the application. (b5edacc)
- Add property-based tests for deployment dependency order, ensuring services are deployed in topological order based on their dependencies. Included tests for independent services to verify they can be deployed in any order. Enhanced testing framework with mock store and queue for accurate simulation of deployment scenarios. (db54a15)
- Add per-service deployment handling and associated tests for deployment isolation and service source usage. Updated request structures to make Git reference optional, allowing for service-specific configurations. Enhanced deployment logic to ensure correct build job creation based on service source type. (afc204e)
- Add Users method to mockStore for enhanced testing in apps_property_test.go (8a89a8c)
- Add Users method to deploymentMockStore for enhanced testing capabilities in deployments_property_test.go (2e2328b)
- Add service handler and tests for service management operations including creation, listing, updating, and deletion of services. Implemented validation for service configurations and dependencies, ensuring proper error handling and response formatting. (0d6ed5b)
- Add Users method to mockStore for testing user-related functionalities in auth_property_test.go (ffa0057)
- Add a command-line tool for generating JWT tokens for the Narvana platform. The tool accepts user ID, email, and JWT secret as inputs, with validation for the secret length and expiry duration. It utilizes the auth package to create and output the generated token. (91313d7)
- Enhance ServiceConfig structure by adding source type support (git, flake, image) and validation logic. Implement methods for validating source configurations and constructing flake URIs. Introduce error handling for invalid inputs and defaults for Git references and flake outputs. (60bb9c4)
- Add property-based tests for service source configurations, ensuring mutual exclusivity of source types (git_repo, flake_uri, image) and validating JSON serialization/deserialization for service configurations. Implemented tests for flake URI construction and system consistency based on the current architecture. (add1e3c)
- Add authentication routes and UI endpoints for user and device authorization. Implemented setup, registration, login, and device approval functionalities, along with serving the main and device auth UI pages. (45c51f9)
- Add UserStore interface and User struct to the Store for user management operations, including user creation, retrieval, authentication, and listing functionalities. (66c0578)
- Add UI components for user authentication and device authorization, including HTML templates and JavaScript logic for registration, login, and device approval processes. (993a7f0)
- Add AuthHandler for user authentication, including registration, login, and device authorization endpoints. Implement in-memory device code management and token generation for secure user sessions. (98f7e9f)
- Add UserStore integration in PostgresStore, including initialization and retrieval methods for user management. (72f6b1b)
- Add UserStore implementation for PostgreSQL, including user creation, retrieval, authentication, and listing functionalities. (003a543)
- Add users table migration for authentication with email indexing (5d90db9)
- Update property-based tests to include 'DependsOn' field in deployment generation (91be871)
- Enhance DeploymentStore to support 'depends_on' field (085ffba)
- Add service dependency checks in the scheduler (d9890e8)
- Add multi-service deployment support by implementing service dependency tracking. Introduce sorting of services based on dependencies in the deployment handler and update the deployment model to include a 'depends_on' field. Add property-based tests to validate that N deployments are created for N services. (46e80df)
- Add migration to introduce depends_on column in deployments table for multi-service dependency tracking, along with an index for efficient querying. (0add82d)
- Add main entry point for build worker (3ae8eba)
- Add builder implementations for Attic, Nix, and OCI, including client configurations and build execution logic. Introduce methods for pushing closures to Attic, executing Nix builds in Podman containers, and building OCI images with tagging and pushing to registries. Enhance logging and error handling throughout the build process for improved reliability and traceability. (9454eeb)
- Add Worker implementation for processing build jobs from the queue, including concurrency management and job status updates. Introduce methods for starting, stopping, and processing jobs, along with logging and error handling for build operations. This enhances the build system's robustness and efficiency. (c54d7b2)
- Add property-based tests for OCI and Nix artifact formats, validating correct image tag and store path structures. Implement tests for build failure scenarios, ensuring logs are preserved and statuses are correctly reported. This enhances the robustness of deployment management and error handling. (4e38f92)
- Add gRPC client implementation for AgentService, including methods for deploying, stopping, and retrieving deployment status. Introduce property-based tests for deployment command completeness and status report synchronization, ensuring robust validation and error handling in deployment requests. (23b91db)
- Add initial protobuf definitions and generated Go code for AgentService, including Deploy, Stop, GetStatus, and StreamLogs RPCs. Define associated request and response messages for deployment management and logging. (27e5866)
- Add proto generation target to Makefile for gRPC and protobuf support (4828e15)
- Update go.mod and go.sum to include new dependencies for gRPC, protobuf, and logging (f851902)
- Add protobuf and gRPC dependencies to flake.nix for enhanced protocol support. (529e97f)
- Implement job management enhancements with improved queue handling, including optimized Enqueue and Dequeue methods. Add comprehensive tests for job processing and error scenarios to ensure reliability and performance. (39fa382)
- Add scheduler implementation with health and resource filtering, cache-aware scheduling, and deployment rescheduling logic. Includes property-based tests for various scheduling scenarios to ensure optimal node selection based on health, resources, and cache availability. (d6901fe)
- Add HTTP API server implementation with routing, middleware, and health check endpoint. Includes setup for application, deployment, node, and secret handlers with authentication and logging middleware for enhanced API functionality. (e4e85d1)
- Add main entry point for API server with configuration loading, database connection, and graceful shutdown handling. Initialize logging, authentication service, and job queue for enhanced server functionality. (7e06a9f)
- Add application handler with CRUD operations and property-based tests for application listing. Implemented request validation, error handling, and mock store for testing application creation and retrieval. Enhanced API usability with structured responses. (88698ee)
- Add deployment, log, node, response, and secret handlers with associated request validation and error handling. Implemented deployment creation, listing, retrieval, and rollback functionality, along with secret management operations including creation, listing, and deletion. Enhanced logging and error responses for improved API usability. (d3cdc6a)
- Add middleware for authentication, logging, and recovery. Implemented AuthMiddleware for JWT and API key validation, RequireOwnership for resource access control, and logging and recovery middleware for enhanced error handling and request logging. (8a7ad90)
- Add queue package with interface for build job management, including Enqueue, Dequeue, Ack, and Nack methods. Implement property-based tests for JSON serialization and deserialization of BuildJob. (267f6a3)
- Add PostgreSQL-backed queue implementation with Enqueue, Dequeue, Ack, and Nack methods for job management. (1ff4399)
- Add migration for build queue schema, including table definition and indexes for job management. (2c6cd92)
- Update go.mod and go.sum to include github.com/go-chi/chi/v5 v5.2.3 as an indirect dependency for routing functionality. (a6b7f40)
- Update go.mod and go.sum to include github.com/golang-jwt/jwt/v5 v5.3.0 as an indirect dependency for JWT token handling. (67da9d3)
- Add authentication service with JWT token generation and validation, including property-based tests for token round-trip, malformed token rejection, expired token handling, and secret mismatch scenarios. (63b7916)
- Add Store interface and implementations for managing applications, deployments, nodes, builds, secrets, and logs in the database, including transaction handling and connection management. (ce2391d)
- Add PostgreSQL store implementation with models for apps, deployments, nodes, builds, secrets, and logs, including property-based tests for each entity. Implemented database connection management, migrations, and error handling for unique constraints. (7007e52)
- Add initial database schema migration for Narvana Control Plane, including tables for apps, deployments, nodes, builds, secrets, and logs, along with necessary indexes and triggers for managing timestamps. (943f40d)
- Add .gitignore to exclude build artifacts, PostgreSQL test data, IDE files, and OS-specific files; update go.mod to require new dependencies and downgrade Go version to 1.24.0 (9840cd6)
- Add flake.lock for dependency management and update flake.nix to use the latest Go version (c7020a6)
- Add flake.nix for Nix-based development environment setup with PostgreSQL and Go tools (2fbbb11)
- Add Node model with resource tracking and metadata fields (597d8d4)
- Update go.mod to require github.com/leanovate/gopter v0.2.11 and add go.sum for dependency management (5bde4e1)
- Add initial model definitions for application, build, deployment, log, and secret entities, including JSON serialization support and property-based testing. (a5dda26)
- Add .gitkeep files to maintain directory structure for api, worker, internal, migrations, and pkg (6129ac6)
- Add config and logger packages for environment-based configuration and structured logging (1d9fcca)
- Add Makefile with build, test, migration, and lint targets (e06bc9e)
- first commit (b69dbd1)

[0.0.6]: https://github.com/narvanalabs/control-plane/releases/tag/v0.0.6
[0.0.1]: https://github.com/narvanalabs/control-plane/releases/tag/v0.0.1
